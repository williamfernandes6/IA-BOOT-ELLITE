<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA ELITE PRO - COMMAND CENTER</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Inter:wght@400;700;900&display=swap');
        body { background: #050507; color: #fff; font-family: 'Inter', sans-serif; display: flex; flex-direction: column; align-items: center; min-height: 100vh; padding: 20px; }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .neon-card { border: 1px solid rgba(219, 39, 119, 0.4); box-shadow: 0 0 50px rgba(219, 39, 119, 0.15); border-radius: 35px; width: 100%; max-width: 440px; position: relative; overflow: hidden; background: #0a0a0c; }
        .scanner { position: absolute; width: 100%; height: 2px; background: #db2777; box-shadow: 0 0 20px #db2777; top: 0; display: none; animation: scan 2s linear infinite; z-index: 100; }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }
        .glass { background: rgba(18, 18, 22, 0.98); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 20px; }
        .terminal { font-family: 'Courier New', monospace; font-size: 9px; color: #10b981; height: 110px; overflow-y: auto; background: rgba(0,0,0,0.5); padding: 12px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.05); }
    </style>
</head>
<body class="space-y-4">

    <div class="fixed top-4 right-4 z-50 flex items-center gap-2 glass px-4 py-2 border border-white/10 rounded-full">
        <span class="text-[9px] font-black text-zinc-500 uppercase tracking-widest">IA Integrada 100%</span>
        <div id="led" class="w-3 h-3 rounded-full bg-green-500 shadow-[0_0_10px_#22c55e]"></div>
    </div>

    <div class="glass p-6 flex justify-between items-center w-full max-w-[440px] mt-10">
        <div><p class="text-[9px] text-pink-500 font-black uppercase mb-1">Luanda AI Sector</p><p id="clock" class="text-xl font-orbitron">00:00:00</p></div>
        <div class="text-right"><p class="text-[9px] text-zinc-500 font-black uppercase mb-1">Banca Elephant</p><p id="banca" class="text-xl font-bold text-green-500 font-orbitron">Kz ---</p></div>
    </div>

    <div class="neon-card p-8 text-center">
        <div id="scanner" class="scanner"></div>
        <div id="status" class="text-[10px] font-black tracking-[0.3em] text-zinc-500 uppercase mb-8">Processamento Deep Mind</div>
        
        <div class="mb-8">
            <p id="pct" class="text-6xl font-orbitron font-black text-white">0%</p>
            <p class="text-[9px] font-black text-zinc-600 uppercase mt-2 tracking-widest tracking-[0.2em]">Cálculo de Inflexão</p>
        </div>

        <div class="grid grid-cols-2 gap-4 py-6 border-y border-white/5 mb-6">
            <div class="text-left"><span class="text-[9px] font-black text-zinc-500 uppercase">Previsão</span><p id="alvo" class="text-lg font-black text-pink-500 uppercase tracking-tighter">---</p></div>
            <div class="text-right"><span class="text-[9px] font-black text-zinc-500 uppercase">Hora Exata</span><p id="timer" class="text-lg font-black text-white">--:--:--</p></div>
        </div>

        <div class="terminal mb-8 text-left shadow-inner" id="log">
            > Integrando Teorema de Bayes... OK<br>
            > Monitorando Detector de Drenagem... OK<br>
            > Memória de Ciclos (24h) Ativa... OK<br>
            > Manual V2.0 Carregado no Kernel... OK
        </div>

        <input type="file" id="file" class="hidden" accept="image/*">
        <div class="space-y-4">
            <button onclick="falar('A carregar dados para o Kernel'); document.getElementById('file').click()" class="w-full bg-zinc-900 py-4 rounded-2xl text-[10px] font-black text-zinc-500 uppercase tracking-widest border border-white/5">1. Analisar Fluxo de Dados</button>
            <button onclick="analisar()" class="w-full bg-pink-600 py-5 rounded-2xl text-xl font-black text-white shadow-[0_10px_40px_rgba(219,39,119,0.3)] uppercase">2. Gerar Sinal Certeiro</button>
        </div>
    </div>

    <div class="glass p-6 w-full max-w-[440px] text-center border border-white/5">
        <p id="tendencia_tag" class="text-[10px] font-black uppercase text-zinc-500 mb-4 tracking-widest">Análise de Tendência de Ciclo (30 Velas)</p>
        <div class="flex flex-wrap gap-2 justify-center" id="hist"></div>
    </div>

    <script>
        const API_URL = 'https://ia-boot-elite-backend-qs3x.onrender.com';

        function addLog(msg) {
            const log = document.getElementById('log');
            log.innerHTML += `> ${msg}<br>`;
            log.scrollTop = log.scrollHeight;
        }

        function falar(t) {
            window.speechSynthesis.cancel();
            const m = new SpeechSynthesisUtterance(t);
            m.lang = 'pt-PT';
            window.speechSynthesis.speak(m);
        }

        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString('pt-PT', {timeZone:'Africa/Luanda'});
        }, 1000);

        async function analisar() {
            const file = document.getElementById('file').files[0];
            if(!file) return alert("Selecione o Print!");

            falar("Iniciando auditoria Bayesiana. Verificando memória de ciclos.");
            document.getElementById('scanner').style.display = 'block';
            addLog("Executando Match de Padrões...");

            const fd = new FormData();
            fd.append('print', file);

            try {
                const res = await fetch(`${API_URL}/analisar-fluxo`, { method: 'POST', body: fd });
                const d = await res.json();

                document.getElementById('scanner').style.display = 'none';
                document.getElementById('timer').innerText = d.horaExata;
                document.getElementById('pct').innerText = d.pct;
                document.getElementById('alvo').innerText = d.alvo;
                document.getElementById('banca').innerText = d.banca;
                document.getElementById('status').innerText = d.status;
                document.getElementById('status').style.color = d.cor;
                document.getElementById('tendencia_tag').innerText = d.tendencia;
                
                addLog(`Status: ${d.status}`);
                addLog(`Decisão: ${d.dica}`);

                falar(`${d.status}. ${d.dica}. Alvo recomendado em ${d.alvo}`);

                const h = document.getElementById('hist'); h.innerHTML = '';
                d.historico.forEach(v => {
                    const c = document.createElement('div');
                    let bg = v >= 10 ? 'bg-pink-600' : (v >= 5 ? 'bg-purple-600' : 'bg-blue-600');
                    c.className = `px-2 py-1 rounded text-[9px] font-black ${bg} text-white border border-white/10`;
                    c.innerText = v.toFixed(2) + 'x'; h.appendChild(c);
                });
            } catch(e) { 
                addLog("ERRO: O Kernel não respondeu.");
                falar("Erro de conexão.");
                document.getElementById('scanner').style.display = 'none';
            }
        }
    </script>
</body>
</html>
